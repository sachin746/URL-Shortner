<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tech Stack | Short.ly</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .tech-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 0.8rem;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .tech-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
        }

        .tech-icon {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tech-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.4rem;
            color: var(--text-color);
        }

        .tech-desc {
            font-size: 0.85rem;
            color: #94a3b8;
        }

        .section-title {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.6rem;
        }

        .section-title span {
            color: var(--primary-color);
        }
    </style>
    <link rel="icon" type="image/png" href="/favicon.ico">
</head>

<body>
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">Short.ly</a>
                <div class="nav-links" id="navLinks">
                    <a href="stats.html">Stats</a>
                    <a href="tech.html">Tech Stack</a>
                    <a href="login.html">Login</a>
                    <a href="register.html" class="btn btn-primary">Get Started</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <section class="hero">
            <div class="container">
                <h1>Built for <br><span>Performance</span></h1>
                <p>Explore the modern technologies powering this URL shortener.</p>

                <h2 class="section-title" style="margin-top: 4rem;">Backend <span>Architecture</span></h2>
                <div class="tech-grid">
                    <div class="tech-card">
                        <div class="tech-icon">Go</div>
                        <div class="tech-title">Golang + Gin</div>
                        <div class="tech-desc">RESTful API with JWT authentication, OAuth2 (Google/GitHub), and
                            middleware for CORS, rate limiting, and auth.</div>
                    </div>
                    <div class="tech-card">
                        <div class="tech-icon">‚ö°</div>
                        <div class="tech-title">Event-Driven Click Tracking</div>
                        <div class="tech-desc">Async producer-consumer pattern using Go channels to track clicks without
                            blocking redirects.</div>
                    </div>
                    <div class="tech-card">
                        <div class="tech-icon">PG</div>
                        <div class="tech-title">PostgreSQL + GORM</div>
                        <div class="tech-desc">Relational database with auto-migrations, foreign keys, and optimized
                            queries for URL storage and analytics.</div>
                    </div>
                    <div class="tech-card">
                        <div class="tech-icon">Rd</div>
                        <div class="tech-title">Redis Caching</div>
                        <div class="tech-desc">In-memory cache for frequently accessed URLs (1-hour TTL) and distributed
                            rate limiting.</div>
                    </div>
                    <div class="tech-card">
                        <div class="tech-icon">üîê</div>
                        <div class="tech-title">Security & Auth</div>
                        <div class="tech-desc">Bcrypt password hashing, JWT tokens, OAuth2 integration, and protected
                            routes with middleware.</div>
                    </div>
                    <div class="tech-card">
                        <div class="tech-icon">üìä</div>
                        <div class="tech-title">Analytics System</div>
                        <div class="tech-desc">Detailed click tracking with IP addresses, timestamps, and aggregated
                            statistics via REST API.</div>
                    </div>
                </div>

                <h2 class="section-title" style="margin-top: 4rem;">How It <span>Works</span></h2>
                <div style="max-width: 900px; margin: 0 auto; text-align: left;">
                    <div class="tech-card" style="margin-bottom: 1.5rem;">
                        <div class="tech-title" style="text-align: left;">1. URL Shortening</div>
                        <div class="tech-desc" style="text-align: left;">
                            User submits a long URL with optional custom short code and validity period (1-12 months or
                            permanent).
                            The backend generates a unique 6-character short code using base62 encoding of a
                            database-generated ID.
                            URL is stored in PostgreSQL with metadata (user_id, created_at, valid_till) and cached in
                            Redis for 1 hour.
                        </div>
                    </div>

                    <div class="tech-card" style="margin-bottom: 1.5rem;">
                        <div class="tech-title" style="text-align: left;">2. URL Redirection</div>
                        <div class="tech-desc" style="text-align: left;">
                            When a short URL is accessed, the system first checks Redis cache. If not found, queries
                            PostgreSQL.
                            Before redirecting, a click event is published to an async Go channel (non-blocking).
                            User is immediately redirected to the original URL with 301 status.
                        </div>
                    </div>

                    <div class="tech-card" style="margin-bottom: 1.5rem;">
                        <div class="tech-title" style="text-align: left;">3. Click Tracking (Async)</div>
                        <div class="tech-desc" style="text-align: left;">
                            Background worker consumes click events from the channel. For each event, it creates a Click
                            record
                            (with IP, timestamp) and increments the URL's click_count in a database transaction.
                            This happens asynchronously without affecting redirect performance.
                        </div>
                    </div>

                    <div class="tech-card" style="margin-bottom: 1.5rem;">
                        <div class="tech-title" style="text-align: left;">4. Analytics & Stats</div>
                        <div class="tech-desc" style="text-align: left;">
                            Users can view detailed statistics via the Stats page. The API endpoint fetches the URL's
                            click_count
                            and recent clicks (last 50) from the database. Data is displayed in a clean table showing
                            timestamps and IP addresses.
                        </div>
                    </div>

                    <div class="tech-card" style="margin-bottom: 1.5rem;">
                        <div class="tech-title" style="text-align: left;">5. Authentication & Security</div>
                        <div class="tech-desc" style="text-align: left;">
                            Users can register/login with username+password (bcrypt hashed) or via OAuth2
                            (Google/GitHub).
                            JWT tokens are issued for authenticated sessions. Protected routes use auth middleware.
                            Rate limiting prevents abuse (Redis-based distributed limiter).
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script src="js/api.js"></script>
    <script>
        // Check auth state
        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelector('.nav-links');
            if (api.isAuthenticated()) {
                // Keep Tech Stack link but change Auth buttons
                const techLink = '<a href="tech.html" class="active">Tech Stack</a>';
                const dashboardLink = '<a href="dashboard.html" class="btn btn-secondary">Dashboard</a>';
                navLinks.innerHTML = `<a href="index.html">Home</a>${techLink}${dashboardLink}`;
            }
        });
    </script>
</body>

</html>